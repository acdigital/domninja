(function(e){"use strict";e(function(){var n=n||{};n.wording={title:"DOM Ninja",close:"Close",message:{ninja:"Ninja, you make me proud!",trainee:"Trainee, room for improvement!",novice:"Novice, you are doing it wrong!"},console:"Check the Javascript console for detailed information."},n.score=0,n.total=0,n.html=e("html"),n.body=n.html.find("body"),n.head=n.body.find("head"),n.code=n.html.html(),n.files={css:"dn_min.css",js:"dn_min.js"},n.setup={documentTags:{elements:e("*").not('div.js_dn_panel, div.js_dn_panel *, link[href$="'+n.files.css+'"], script[src$="'+n.files.js+'"]'),description:"Document tags",amountNinja:1e3,amountTrainee:1500,amountNovice:2500},httpRequests:{elements:e("iframe[src], img[src], link[href], script[src], source[src], object[data]").not('link[href$="'+n.files.css+'"], script[src$="'+n.files.js+'"]'),description:"HTTP requests",amountNinja:15,amountTrainee:25,amountNovice:50},deprecatedTags:{elements:n.body.find("applet, basefont, center, dir, font, i, isindex, menu, s, strike, u, xmp"),description:"Deprecated tags",amountNinja:0,amountTrainee:50,amountNovice:100},deprecatedAttributes:{elements:n.body.find("[align], [alink], [background], [bgcolor], [border], [clear], [height], [hspace], [language], [link], [nowrap], [start], [text], [vlink], [vspace], [width]"),description:"Deprecated attributes",amountNinja:0,amountTrainee:100,amountNovice:200},iframeTags:{elements:n.body.find("iframe"),description:"Iframe tags",amountNinja:0,amountTrainee:5,amountNovice:10},embedTags:{elements:n.body.find("embed"),description:"Embed tags",amountNinja:0,amountTrainee:5,amountNovice:10},scaledImgTags:{elements:n.body.find("img[width], img[height]"),description:"Scaled img tags",amountNinja:5,amountTrainee:10,amountNovice:20},conditionalComments:{elements:n.code.match(/<!--\[.*?\]-->/g),description:"Conditional comments",amountNinja:20,amountTrainee:30,amountNovice:40},documentComments:{elements:n.code.match(/<!--.*?-->/g),description:"Document comments",amountNinja:10,amountTrainee:20,amountNovice:30},emptyTags:{elements:n.html.find(":empty").not("area, base, basefont, br, hr, iframe[src], img[src], input, link[rel], meta, param, script[src]"),description:"Empty tags",amountNinja:50,amountTrainee:100,amountNovice:250},emptyAltAttributes:{elements:n.body.find('img[alt=""]'),description:"Empty alt attributes",amountNinja:0,amountTrainee:10,amountNovice:20},emptyHrefAttributes:{elements:n.body.find('a[href=""]'),description:"Empty href attributes",amountNinja:0,amountTrainee:10,amountNovice:20},emptySrcAttributes:{elements:n.body.find('iframe[src=""], img[src=""]'),description:"Empty src attributes",amountNinja:0,amountTrainee:5,amountNovice:10},visibleTags:{elements:n.body.find(":visible"),description:"Visible tags",amountNinja:650,amountTrainee:1300,amountNovice:2e3},hiddenTags:{elements:n.body.find(":hidden"),description:"Hidden tags",amountNinja:100,amountTrainee:200,amountNovice:500},displayRatio:{elements:"",description:"Display ratio",amountNinja:20,amountTrainee:40,amountNovice:60},hasIDTags:{elements:n.body.find("[id]"),description:"Tags with ID",amountNinja:10,amountTrainee:20,amountNovice:50},duplicatedIDTags:{elements:[],description:"Tags with duplicated ID",amountNinja:0,amountTrainee:5,amountNovice:10},nestedIDTags:{elements:n.body.find("[id] > [id]"),description:"Tags with nested ID",amountNinja:10,amountTrainee:20,amountNovice:30},deepNestedTags:{elements:n.body.find("* > * > * > * > * > * > * > * > * > * > * > * > * > * > *"),description:"Deep nested tags",amountNinja:0,amountTrainee:20,amountNovice:50},styleTagsInBody:{elements:n.body.find("style"),description:"Style tag in body",amountNinja:5,amountTrainee:10,amountNovice:20},styleExternals:{elements:n.html.find('link[type="text/css"][rel="stylesheet"]').not('link[href$="'+n.files.css+'"]'),description:"External style files",amountNinja:5,amountTrainee:10,amountNovice:20},styleInlineAttributes:{elements:n.html.find("[style]").not("div.js_dn_panel"),description:"Inline style attributes",amountNinja:0,amountTrainee:10,amountNovice:20},scriptTagsInHead:{elements:n.head.find("script"),description:"Script tags in head",amountNinja:5,amountTrainee:10,amountNovice:20},scriptExternals:{elements:n.head.find('script[type="text/javascript"][src]').not('script[src$="'+n.files.js+'"]'),description:"External script files",amountNinja:5,amountTrainee:10,amountNovice:20},scriptInlineAttributes:{elements:n.html.find("[onabort], [onactivate], [onafterprint], [onafterupdate], [onbeforeactivate], [onbeforecopy], [onbeforecut], [onbeforedeactivate], [onbeforeeditfocus], [onbeforepaste], [onbeforeprint], [onbeforeunload], [onbeforeupdate], [onblur], [onbounce], [oncellchange], [onchange], [onclick], [oncontextmenu], [oncontrolselect], [oncopy], [oncut], [ondataavailable], [ondatasetchanged], [ondatasetcomplete], [ondblclick], [ondeactivate], [ondrag], [ondragend], [ondragenter], [ondragleave], [ondragover], [ondragstart], [ondrop], [onerror], [onerrorupdate], [onfilterchange], [onfinish], [onfocus], [onfocusin], [onfocusout], [onhelp], [onkeydown], [onkeypress], [onkeyup], [onlayoutcomplete], [onload], [onlosecapture], [onmousedown], [onmouseenter], [onmouseleave], [onmousemove], [onmouseout], [onmouseover], [onmouseup], [onmousewheel], [onmove], [onmoveend], [onmovestart], [onpaste], [onpropertychange], [onreadystatechange], [onreset], [onresize], [onresizeend], [onresizestart], [onrowenter], [onrowexit], [onrowsdelete], [onrowsinserted], [onscroll], [onselect], [onselectionchange], [onselectstart], [onstartonstop], [onsubmit], [onunload]"),description:"Inline script attributes",amountNinja:0,amountTrainee:10,amountNovice:20},scriptGlobals:{elements:[],description:"Script globals",amountNinja:20,amountTrainee:50,amountNovice:100}},n.calcElementsAmount=function(){var e=0;for(e in n.setup)n.setup.hasOwnProperty(e)&&(n.total++,n.setup[e].amount=n.setup[e].elements?n.setup[e].elements.length:0)}(),n.calcConditionalComments=function(){n.setup.conditionalComments.amount&&(n.setup.documentComments.amount=n.setup.documentComments.amount-n.setup.conditionalComments.amount)}(),n.calcDisplayRatio=function(){n.setup.visibleTags.amount&&n.setup.hiddenTags.amount&&(n.setup.displayRatio.amount=Math.round(100*(n.setup.hiddenTags.amount/n.setup.visibleTags.amount)))}(),n.calcDuplicatedID=function(){n.setup.hasIDTags.elements.each(function(){var t=e("[id="+this.id+"]"),o=t.length;o>1&&t[0]===this&&(n.setup.duplicatedIDTags.elements.push(t),n.setup.duplicatedIDTags.amount+=o)})}(),n.calcScriptGlobals=function(){var e=0;for(e in window)window.hasOwnProperty(e)&&(n.setup.scriptGlobals.elements.push(e),n.setup.scriptGlobals.amount++)}(),n.consoleLog=function(){"object"==typeof window.console&&("function"==typeof window.console.info&&window.console.info(n.wording.title),"function"==typeof window.console.log&&window.console.log(n.setup))}(),n.destroyPanel=function(){n.body.find('div.js_dn_panel, link[href$="'+n.files.css+'"], script[src$="'+n.files.js+'"]').remove()},n.createPanel=function(){n.panel=n.panel||{},n.destroyPanel(),n.panel.body=e('<div class="js_dn_panel dn_panel"></div>').appendTo(n.body),n.panel.title=e('<h1 class="js_dn_title_panel dn_title_panel">'+n.wording.title+"</h1>").appendTo(n.panel.body),n.panel.list=e('<ul class="js_dn_list_panel dn_list_panel"></ul>').appendTo(n.panel.body),n.html.add(n.body).animate({scrollTop:0},1e3),n.panel.title.click(function(){n.destroyPanel()}),n.panel.title.hover(function(){n.panel.title.text(n.wording.close)},function(){n.panel.title.text(n.wording.title)})}(),n.createPanelItems=function(){var e="",t=0;for(t in n.setup)n.setup.hasOwnProperty(t)&&(e+='<li class="dn_amount_',n.setup[t].amount<=n.setup[t].amountNinja?(n.score++,e+="ninja"):n.setup[t].amount<=n.setup[t].amountTrainee?e+="trainee":n.setup[t].amount<=n.setup[t].amountNovice?(n.score--,e+="novice"):(n.score--,e+="fail"),e+='" title="Ninja: '+n.setup[t].amountNinja+" | Trainee: "+n.setup[t].amountTrainee+" | Novice: "+n.setup[t].amountNovice+'">'+n.setup[t].description+": "+n.setup[t].amount+"</li>");n.panel.list.html(e).fadeIn(500)}(),n.handleScore=function(){var e="";0>n.score&&(n.score=0),e='<li class="dn_item_message" title="'+n.wording.console+'">',n.type=n.score>=n.total-5?"ninja":n.score>=n.total-10?"trainee":"novice",e+='<span class="dn_score">'+n.score+"/"+n.total+'</span><span class="dn_message">'+n.wording.message[n.type]+"</span></li>",n.panel.list.append(e),n.panel.body.addClass("dn_score_"+n.type)}()})})(jQuery);