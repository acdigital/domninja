module.exports = function (grunt)
{
	'use strict';

	/* config grunt */

	grunt.initConfig(
	{
		watch:
		{
			scripts:
			{
				files:
				[
					'<%=jshint.dependency%>',
					'<%=jshint.dn%>'
				],
				tasks:
				[
					'jshint'
				]
			},
			styles:
			{
				files:
				[
					'<%=csslint.dn.src%>',
					'<%=csslint.index.src%>'
				],
				tasks:
				[
					'csslint'
				]
			}
		},
		jshint:
		{
			dependency:
			[
				'gruntfile.js'
			],
			dn:
			[
				'scripts/dn.js'
			],
			options:
			{
				jshintrc: '.jshintrc'
			}
		},
		jsonlint:
		{
			dependency:
			[
				'composer.json',
				'package.json'
			]
		},
		csslint:
		{
			dn:
			{
				src:
				[
					'styles/dn.css'
				]
			},
			index:
			{
				src:
				[
					'styles/index.css'
				]
			},
			options:
			{
				csslintrc: '.csslintrc'
			}
		},
		htmlhint:
		{
			index:
			{
				src:
				[
					'index.html'
				]
			},
			options:
			{
				htmlhintrc: '.htmlhintrc'
			}
		},
		uglify:
		{
			dn:
			{
				files:
				{
					'scripts/dn_min.js':
					[
						'scripts/dn.js'
					]
				}
			}
		},
		cssmin:
		{
			index:
			{
				files:
				{
					'styles/index_min.css':
					[
						'styles/reset.css',
						'styles/index.css'
					]
				}
			},
			dn:
			{
				files:
				{
					'styles/dn_min.css':
					[
						'styles/reset.css',
						'styles/dn.css'
					]
				}
			}
		},
		shell:
		{
			toc:
			{
				command: 'php vendor/redaxmedia/tocgen/tocgen.php scripts && php vendor/redaxmedia/tocgen/tocgen.php styles'
			},
			options:
			{
				stdout: true
			}
		}
	});

	/* load tasks */

	grunt.loadNpmTasks('grunt-contrib-csslint');
	grunt.loadNpmTasks('grunt-contrib-cssmin');
	grunt.loadNpmTasks('grunt-contrib-jshint');
	grunt.loadNpmTasks('grunt-contrib-uglify');
	grunt.loadNpmTasks('grunt-contrib-watch');
	grunt.loadNpmTasks('grunt-htmlhint');
	grunt.loadNpmTasks('grunt-jsonlint');
	grunt.loadNpmTasks('grunt-shell');

	/* register tasks */

	grunt.registerTask('default',
	[
		'jshint',
		'jsonlint',
		'csslint',
		'htmlhint'
	]);
	grunt.registerTask('toc',
	[
		'shell:toc'
	]);
	grunt.registerTask('deploy',
	[
		'uglify',
		'cssmin'
	]);
};